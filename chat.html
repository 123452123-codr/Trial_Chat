<!DOCTYPE html>
<html>
    <head>
        <title>Chat</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <style>
            table, tr, td {
                border: 1px solid white;
            }
            #messagecolumn {
                height: 200px;
                width: 400px;
                overflow: auto;
            }
            #stick {
                position: sticky;
                position: -webkit-sticky;
            }
        </style>
        <div class="container">
            <table>
                <tr>
                    <td id="messagecolumn">
                        <ul id="m"></ul>
                    </td>
                </tr>
                <tr id="stick">
                    <td id="inputcolumn">
                        <input type="text" class="form-control input-lg" name="a" id="t">
                    </td>
                    <td id="buttoncolumn">
                        <button id="s">Send</button>
                    </td>
                </tr>
            </table>
        </div>
    </body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.0.1/firebase-analytics.js";
        import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/9.0.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCX_J_3OFvZd0Yk4zkWR_aaIaf5UMLWZGY",
            authDomain: "trial-chat-pro.firebaseapp.com",
            databaseURL: "https://trial-chat-pro-default-rtdb.firebaseio.com",
            projectId: "trial-chat-pro",
            storageBucket: "trial-chat-pro.appspot.com",
            messagingSenderId: "646594064526",
            appId: "1:646594064526:web:a3c0301e921af03d59d9df",
            measurementId: "G-YEF7ZR6HRF"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);

        var message = document.getElementById('m');
        var text = document.getElementById('t');
        var send = document.getElementById('s');

        send.addEventListener('click', function(){
            var oldscrollHeight = message.scrollHeight;

            const db = getDatabase();
            set(ref(db, 'Chat'), {
                Name: text.value
            });

            onValue(ref(db, 'Chat'), (snapshot) => {
                const data = snapshot.val();
                var newMessage = document.createElement("li");
                newMessage.classList.add("list-group");
                newMessage.innerHTML = data.value;
                message.appendChild(newMessage);

                var newscrollheight = message.scrollHeight;
                if(newscrollheight > oldscrollHeight)
                {
                    message.scrollTop = (newscrollheight - oldscrollHeight);
                }
            });
        });
    </script>
</html>